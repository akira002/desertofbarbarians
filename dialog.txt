/*colonel-1
""Good morning, Lieutenent Drogo, and welcome to the Fortress Bastiani. It's been hard times, fighting against the Barbarians. Brace yourself: this war is going to last for a long time.


/*colonel-1
""Times have changed and nowadays their attacks are continuous. We need your help and your competence. Our Antimissile System is old and rusty, not adequate to face these tremendous attacks. You have to fix it, and quickly
--1--I have no competences, Sir
--2--Yes Sir!

/*colonel-1
""1--In this case, we have to pray God. Anyway you can ask some help to your Assistant Melissa.

/*colonel-1
""2--You'll soon discover that our missiles are shoot very slowly. Your first mission is to find the reason, fix it and guide the defense against the Barbarians. But pay attention: we cannot afford to lose any of our towers in this battle.
--Yes Sir!


/*assistant-1
""Hi newbie, I'm your assistant, Sub-Lieutenent Melissa Kazushi. I'm here at the front from last year, so I had the time to document myself on our Antimissile System. If you need some generic help on the mission, you just need to ask.
--Sure



/*assistant-1
""The whole system is written in an ancient and misterious programming language, that many years ago, computer scientist use to call Javascript
--1--I can do it
--2--Tell me more for this mission

/*assistant-1
""1--We we'll see. Hope you are as bold as lucky. Fighting Barbarians is not a game.

/*assistant-1
""2--You have to increase the speed of our missiles. Looks like it's enough to find the right variable, in this portion of the system code, and change its value.

/*crazy_doctor-1
""It seems you're in trouble, kid...
--Who are you?

/*crazy_doctor-1
""I'm your Guardian Angel!
--I'm Atheist
--I can't see wings

/*crazy_doctor-1
""I was joking, boy, I'm Doctor Gilbert Nichols, and many many years ago, when you weren't born already and Internet Explorer was considered a good Browser, I was in the team or programmers that created your Antimissile System


/*crazy_doctor-1
""Let's go to the point: I see that you've been defeated many times in this mission. Do you want some help? I can give you very specific hints
--1--Yes, please
--2--No, I can do it by myself

/*crazy_doctor-1
""1--Okay, let's reason using physics: think that the function called "scale" should return the time that a missile takes to reach the target. If you want to lower this time, what you have to increase?

/*crazy_doctor-1
""2--In that case, I'll won't say a word.

/*colonel-2
""Good morning, Lieutenent Drogo, and congratulations for completing previous mission. Unluckily, your lack of experience damaged our Antimissile System: your missiles were too fast for our old System and last battle damaged the targeting system.
--I'm so sorry, Sir
--I'll fix it, Sir

/*colonel-2
""200 push-ups of punishment, fix the targeting system and you'll be forgiven.
--Yes Sir!
--May I skip push-ups?

/*colonel-2
""Be quick, Barbarians won't wait for you and they surely will defeat us, with our targeting system broken.
--Yes Sir!

/*colonel-2
""Also in this mission you can't lose any of our towers. I hope won't have to repeat it every time.

/*assistant-2
""Hi newbie, you thought you were pretty good, after defeating Barbarians in last battle, but you caused more harm than good
--You're always very nice with me
--It's not my fault

/*assistant-2
""Anyway, why are you calling me? Do you need some help?
--1--Yes, please
--2--No, just wanted to say hi

/*assistant-2
""1-- If you look at the code, it seems that some operations are performed on the coordinates you choose to shoot at, but I'm not sure they're all necessary. Start checking this!

/*assistant-2
""2-- Don't waste time. Enemy is close!

/*crazy_doctor-2
""You're in trouble, again kid...
--I admit it

/*crazy_doctor-2
""And you need your favorite Doctor's help?
--1--I am afraid to say yes
--2--You're not my favorite in any field

/*crazy_doctor-2
""1--First rule of modifying someone else's code: understand what the code does. event.pageX and event.pageY are the coordinates - $eccecc are correction for the screen positioning, but what's the sense of these other numbers, it there's any?
--Got it

/*crazy_doctor-2
""2-- Calm down boy, there's a solution for everything. If you too proud to listen to me, I won't annoy you anymore.

/*colonel-3
""Good morning, Lieutenent Drogo, this time you completed last mission without any unpleasant sideffect. Are you ready for next mission?
--I'm born ready, sir!

/*colonel-3
""Peace is temporary in these dangerous times. As you can see, after latest battles, we only have one missile in our cannons.
--1--What is my mission sir?
--2--So what?

/*colonel-3
""1--Your mission is to adjust and run the mechanism that autoloads the missiles in our cannons.
--Yes Sir! Consider it as done!

/*colonel-3
""2--SO WHAT? First, always call me Sir. Second, don't dare to reply to me in such a arrogant way, or you'll be given to Barbarians as a breakfast cookie. Third, go to fix the mechanism that autoloads missiles in our cannons. NOW.
--YESSIR!

/*assistant-3
""Hi newbie, or maybe I shall start to call you Lieutenent. It's been a while since your first battle.
--1--I would appreciate it
--2--Don't waste time, Melissa!

/*assistant-3
""1--Okay, Lieutenent, are you ready for the new mission? As you'll already know, we have to fix that old and rusty autoload mechanism

/*assistant-3
""2--As you prefer, newbie. So, let's ignore formalities. As you'll already know, we have to fix that old and rusty autoload mechanism

/*assistant-3
""After a couple of battles, I think that you can trust me. Shall I give you my opinion?
--Yes, please

/*assistant-3
""The code seems generally correct, maybe there are just some details to be fixed and some little things that are missing

/*crazy_doctor-3
""Are you waitin' for an advice, boy?
--Hi Gilbert, just in time!

/*crazy_doctor-3
""You want me to go direct to the point?
--1--Yes, time is running out
--2--No, please, talk me about the weather

/*crazy_doctor-3
""1--I'll let you know something that will be very useful also in next missions: you code console is smart. Not smart as its creator -me, modestly- but cant help you while you're coding: it highlights key words and, on the left of line numbers, tells you if there's something wrong. I said enough, for today
--1--Thank you Gilbert!

/*crazy_doctor-3
""2-- The weather is sunny, with maximum degrees near to 35C. And since you're so nice with me, I won't help you for this mission.

/*crazy_doctor-2
""2-- Calm down boy, there's a solution for everything. If you too proud to listen to me, I won't annoy you anymore.

/*colonel-4
""Today is a very dramatic day. That cowards and uncivilized Barbarians attacked during the night time and destroyed all our towers and cannons.
--1--How could this happen?
--2--And I've to rebuild all?

/*colonel-4
""1--Major Guidi fell asleep during his guard duty. He has been hanged at dawn.
--...

/*colonel-4
""2--I would be glad to order you this, but I'm not stupid. You're a programmer, not a bricklayer
--Thank you, Sir

/*colonel-4
""Clearly your mission is to rebuild all our towers and cannons, but to do so, you'll reprogram our builder drones.
--Builder drones?

/*colonel-4
""Yes, Lieutenent, we do have builder drones. But their source code is not efficient enough: as it is, they would take at least 36 days to rebuild all.
--What is the problem, Sir?

/*colonel-4
""2--THE PROBLEM WE CAN'T SUSTAIN 36 DAYS WITHOUT ALL OUR DEFENSIVE APPARATUS. I give you 9 days, not a single minute more.
--Yes, Sir!

/*assistant-4
""Hi, Drogo. How was speaking with Colonel today? Like walking barefoot on burning coals?
--1--More or less
--2--Don't joke, today is a dramatic day

/*assistant-4
""1--If you survived to a chat with Colonel this morning, next mission will be a joke for you

/*assistant-4
""2--I was trying to make you laugh. You look very tired, today. At least, have a coffee!

/*assistant-4
""Do you want a quick overview on next mission?
--Yes, Melissa

/*assistant-4
""Oh, you called with my name! You learnt good manners! Anyway, let's be serious: we need to rebuild all that stuff, and quickly. Every time you call a constructor on a point, drones take a day to start the building, but complete it only if it is in the right position and if the whole schedule doesn't take more than 9 days.
--I can do it!

/*crazy_doctor-4
""Finding hard to play with those drones?
--I do, are you the genius who programmed those?

/*crazy_doctor-4
""Nono, we bought them used on eBay, sent from China. Anyway this mission can seem a little bit obscure for you. May I help you?
--1--Yes, please
--2--No, I'll search for the warranty and contact seller.

/*crazy_doctor-4
""1--Let's put all pieces together: first, you have 9 days of time for the whole job. Every time new castle(i) or new antiMissileBattery(i) a counter gets incremented by 1, if at the end of the program it's greater than 9, the building won't take place. Second, our fortress have 18 building slots, if you choose the wrong position the building won't take place. The correct positions for towers are 3, 5, 7, 11, 13, 15; for cannons are 1, 9, 17. And please, PLEASE, use loops!
--Gilbert, you're a real genius!

/*crazy_doctor-4
""2--I like your sense of humor. Bye bye, young man.

/*colonel-5
""Good Morning Captain Drogo. You really deserved this rank promotion after last successful mission. Anyway, the enemy never sleeps: are you ready for next mission?
--Yes, Sir
--YESSIR!

/*colonel-5
""This time you have to repare a damage done by Sub-Lieutenant Kazushi. She found and executed and old and experimental project for our cannons, the result is that actually we are not ready to fight.
--What effect has, this project?

/*colonel-5
""I know that it will be hard to believe, for you, but it stops the flow of time.
--Are you joking, sir?

/*colonel-5
""No, I don't. It was a very dangerous and experimental experiment, done many many years ago by our team of scientists. You have to revert it to the previous behavior, when it was a simple program that decided not to shoot if the target was to close or too far.
--I'll do my best, Sir!

/*colonel-5
""Let's hope it's enough. I can see that Barbarians are preparing another attack.

/*assistant-5
""Good Morning Lieutenant, ehm, Captain
--1--No more jokes, today?
--2--Don't worry, we'll fix everything

/*assistant-5
""1--I'm so sorry, sigh, I thought that this program could be useful, sigh, and enemy is so close, sigh
--We'll fix everything, Melissa

/*assistant-5
""2--Oh, you're so kind with me, sigh
--Don't worry

/*assistant-5
""Okay, let's examine the situation: we had this program, that checked if the point where you choose to shoot at was too close or too far. We have to restore that functionality and destroy all these time-flow functionalities.
--Any advice?

/*assistant-5
""I think that you should keep checking if the height, otherwise the program is completely useless and I'm not sure it will work.
--You've been very useful!

/*crazy_doctor-5
""Hey boy, having fun with time traveling?
--Not so much, really

/*crazy_doctor-5
""It is made by tons of lines of code. Do you need my help to figure out the solution?
--1--Clearly
--2--No, I can do it by myself

/*crazy_doctor-5
""1--Your mission is to revert this big mess, to a simple function that checks if the x are too high or too low. I think that you can save just the two outer loops and it should work.
--Thank you, Gilbert

/*crazy_doctor-5
""2--Good luck, boy. We were drinking all a lot of Vodka when we programmed that stuff.

/*colonel-6
""Good Morning Captain Drogo. It's not a good morning, actually. As you surely noticed this night an earthquake heavily damaged our castle and our defensive apparatus.
--I see

/*colonel-6
""Again, you have to reprogram our drones to rebuild towers and cannons. Unluckily you cannot use the same program, because drones you previously used has been damaged by earthquake.
--What should I do?

/*colonel-6
""Sub-Lieutenant Kazushi have found others drones, she'll explain you everything
--Yes, Sir!

/*colonel-6
""Also this time we must rebuild everything as quick as possible. I give you 9 days.
--I'll do my best, Sir!

/*assistant-6
""Eventful night, Captain Drogo, wasn't it?
--1--I'm waitin' for invasion of locusts
--2--I'was dancing in my bed

/*assistant-6
""1--Yeah, it's been hard times, since you arrived
--Maybe is my negative influence

/*assistant-6
""2--Oh, little princess Drogo sleeps, instead of helping his fellows in the night watch
--It wasn't my shift

/*assistant-6
""Anyway, I retrieved these new building drones. They have a different behavior than the previous ones: their source code cannot contain loops, you have to do all recursively.
--Any advice?

/*assistant-6
""Having the experience of previous mission, we know that towers have to be placed on slots 3, 5, 7, 11, 13, 15 and cannons on 1, 9 and 17. Don't waste time!

/*crazy_doctor-6
""Cannot figure out how recursion works, kid?
--I admit it

/*crazy_doctor-6
""It should be quite simple for you, at this point, anyway, do you need my advices?
--1--Yes, Gilbert
--2--No, I want to try again

/*crazy_doctor-6
""1--You can call me Jibi, we are friends, by now. What are you missing in this code? Do you remember that every time a constructor is called, you lose 1 day? And that you upper limit is 9? So maybe you just need to put an if for the castle constructor and an if for the AntiMissileBattery constructor, to execute them only if you are in the right slot. Another useful function is console.log(x): it prints in browser's console the value of x. In this case you can use it to discover the value passed to the function, when it's called.
--Thank you, Gilbert

/*crazy_doctor-6
""2--You're very touchy, I didn't want to offend you, offering my help. Bye, kid.

/*colonel-7
""Good Morning Captain Drogo. I have a new kind of mission for you: until now, your mission consisted in correcting o reformulating someone else's code. Today, I'll ask you to design something entirely new, from scratch.
--1--I'm honored by your request
--2--I fear I'm not good enough

/*colonel-7
""1--Don't make me regret to trust you for this fundamental task
--I won't, Sir!

/*colonel-7
""2--Don't be modest, you already proved your valor in many battles
--Thank you, Sir!

/*colonel-7
""As you probably noticed, Barbarians' missiles have increased in number and speed in latest attacks. We have to build a new weapon, to counterattack.
--Which kind of weapon?

/*colonel-7
""My suggestion is to build a double shoot cannon, able to shoot two missiles at a time. In that way, we can destroy easily an higher number of enemy missiles. Sub-Liuetenant Kazushi will give you all the necessary details.
--Yes, Sir!

/*assistant-7
""Tough mission, this time, isn't it?
--1--I'm scared of nothing
--2--I'm not sure I can do it

/*assistant-7
""1--Oh, you're such a brave man, Drogo! I really admire you.
--I like your sense of humor

/*assistant-7
""2--Oh, come on! You fixed a time travel machine, now you think you're not good enough to build a double cannon?!?
--You're right

/*assistant-7
""Let's be serious now. I examined the function that rules the cannon until now, it doesn't seems too difficult to replicate.
--Which function I must use?

/*assistant-7
""You can create a missile to a given point with a command like this: new PlayerMissile (source,height,width). Such a command must be placed inside the array of your missiles, playerMissiles, with the command push. Others recommendations are: don't forget to use checkHeight, to determine the cannon which has to shoot with whichAntiMissileBattery (and to return if whichAntiMissileBattery has returned -1). Let's go and try, Captain!
--Let's do it!

/*crazy_doctor-7
""Did your friend Melissa gave you all necessary instructions?
--You, old nosy!

/*crazy_doctor-7
""Did you find hard to complete this job
--1--Yes, help me Jibi
--2--No, I think I can do it

/*crazy_doctor-7
""1--Let's go to the point, it seems that you had precise indications, but, as Romans used to say, "Repetita iuvat": to create a new missile at a specified position, call playerMissiles.push( new PlayerMissile( source, x, y ) ) . If you want to create 2 missiles at a time, it's enough to call this function two times for every click. I suggest you not to exaggerate with a triple or foufold cannon: you'll only waste missiles. I also suggest to shift the position of the second missile adding a constant number to the x, while creating the missile.
--Your help is always precious!

/*crazy_doctor-7
""2--Okay, kid, I see you're quite confident in your knowledge. Bye byeee.

/*colonel-8
""Good Morning Major Drogo. With your last invention, you earned really deserved promotion.
--I'll honor my new rank

/*colonel-8
""I'm sure you will, son. But the showdown with the Barbarians still have to come. Ore spies informed us that the enemy is preparing a brutal attack, with all the missiles the own, to destroy Fortress Bastiani and end this long siege. This is a big threat for us, but also an opportunity to win this ware once for all.
--What is your plan, Sir?

/*colonel-8
""Given that enemy won't save any missile, any bullet, I give you the authorization to use all the missiles we have in our deposit.
--That's all, Sir?

/*colonel-8
""Clearly no. I order you to build a new weapon: an automatic missile defense system, that shoots missiles every second or so is strategic points over our towers and cannons. Your assistent Lieutenant Kazushi will give you the details of my plan.
--Yes, Sir!

/*assistant-8
""Happy for our promotion, Major Drogo?
--1--Yes, Melissa
--2--Yes, Lieutenant

/*assistant-8
""1--Please, call me Lieutenant Kazushi

/*assistant-8
""2--Don't be so formal, Drogo, call me Melissa!

/*assistant-8
""Let's examine now Colonel's plan: he wants you to build a program that automatically shoots, every second. Any ideas?
--Infinite loops?

/*assistant-8
""No, it would be very bad programming! Colonel, who many years ago was considered a very important web developer, suggested to use the function setInterval(function, interval), which executes given function at given intervals of time (for example, 1000 is every second). To choose the right height and width, think at our defensive apparatus as 18 slices of CANVAS_WIDTH, while you can set the height using CANVAS_HEIGHT as reference.
--Okay, I can do it!

/*crazy_doctor-8
""Automatic shoot system, kid? Sounds very sci-fi!
--Hi Jibi!

/*crazy_doctor-8
""I can give you a hint or two, my dear
--1--Yes, I'm in trouble
--2--No, thank you!

/*crazy_doctor-8
""1--I'll be brief: in javascript, you can define a function inside a function. I suggest you to create a function, call it whenever you like, and then invoke it at precise intervals with setInterval. Second, what this function must do? It should be just a loop that shoot a certain number of missiles (I think 18 are enough) at precise positions. If you forgot it, the easiest way to shoot is playerShoot(x,y). Go kid, I believe in you.
--Your help is always precious!

/*crazy_doctor-8
""2--Okay, but be sure that everything works fine: defending from 100 missiles is very different than from 10, kid!

/*colonel-9
""Good Morning Major Drogo. We won the last battle, but unluckily, not the war. Anyway we can clearly see that the enemy is weak and demotivated. I'm quite sure that their next attack will be the last.
--That's good news, Sir!

/*colonel-9
""Not at all, Major. The fact is that during last tremendous fight, the system that governed with cannon has to shoot, got broken. A battle in such conditions is unsustainable. You know what i'm going to ask you?
--To fix it, sir?

/*colonel-9
""Not exactly. We lost all the schemes of that system, so you have to rebuild it from scratch. And, like always, in the battle we cannot lose a single tower: we have no resources to rebuild them. Go: this will be probably your last mission here.
--Yes, Sir!

/*assistant-9
""Ready for your last mission, Sir?
--Let's defeat these Barbarians!

/*assistant-9
""The system you have to rebuild, deals with choosing the right cannon to shoot to a given enemy missile. For example, if you shoot to a missile in the right hand side of the landscape, the system made the rightmost cannon shoot. The original systems took care of the case in which a cannon has no missiles loaded: if a cannon is empty, you must shoot from the nearest of the ones with loaded missiles.
--Any advice?

/*assistant-9
""To check if a cannon has missiles, use use the method hasMissile() on an cannon; you can select a cannon with antiMissileBatteries[index]. You have to use firedToOuterThird(x, y, z), with x, y and z priorities that you choose to assign to cannons. This method returns the loaded cannon with highest priority. Another method is firedtoMiddleThird(x, y), that makes the same thing, but for only two cannons. I know that it difficult Drogo, but you can do it, we can do it: we can win this war, together.
--Yes, Melissa, let's start!

/*crazy_doctor-9
""You were walking straight to happy ending, when...
--When you interrupted me?

/*crazy_doctor-9
""When you dealt with your low programming capacities
--1--Help me, instead of fooling me
--2--I don't need your help, Jibi

/*crazy_doctor-9
""1--It's very simple: your function must include three cases, one if you have to shoot in in first third of the landscape, one if you have to shoot in the second third and one, guess what, for shooting in the third third. You can obtain this easily from CANVAS_WIDTH. firedToOuterThird is useful when you want to shoot in the leftmost or in the rightmost third, same function but inverted priorities. When you shoot to the second third, the central, use always the central cannon, until it has missiles. Then you can divide the landscape in two sides and use firedtoMiddleThird.

/*crazy_doctor-9
""2--If you're so sure, I will remain silent. But remember: the outcome of a decennial war depends of you.
